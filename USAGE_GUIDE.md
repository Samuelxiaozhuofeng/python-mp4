# ListenFill AI 使用指南

## 🚀 快速开始

### 1. 启动应用程序
```bash
python main.py
```

### 2. 配置AI服务 (首次使用必须)
1. 点击菜单 "设置" → "AI服务配置"
2. 输入您的API配置：
   - **API Key**: 您的AI服务API密钥
   - **API URL**: API服务地址
   - **AI模型**: 选择或输入模型名称
3. 点击"测试连接"验证配置
4. 点击"保存"

### 3. 导入视频文件
1. 点击菜单 "文件" → "导入视频文件"
2. 选择您的视频文件 (支持MP4, AVI, MKV, MOV等格式)
3. 视频将自动加载到播放器中
4. 系统会询问是否导入字幕文件

### 4. 导入字幕文件 (可选)
1. 在视频加载后选择"是"导入字幕，或
2. 点击菜单 "文件" → "导入字幕文件"
3. 选择SRT格式的字幕文件
4. 在字幕导入对话框中：
   - 查看字幕信息和统计
   - 调整时间同步 (如果需要)
   - 预览字幕效果
   - 验证字幕质量
5. 点击"导入字幕"完成

### 5. 配置AI练习生成
1. 确保已导入视频和字幕文件
2. 点击菜单 "设置" → "练习配置"
3. 在练习配置对话框中设置：
   - **学习水平**: 选择A1-A2(初级)、B1-B2(中级)或C1-C2(高级)
   - **挖空重点**: 选择词性、难度、语法点等重点类型
   - **挖空密度**: 调整10%-50%的挖空比例
4. 点击"生成练习"开始AI智能分析
5. 等待AI为每句字幕生成个性化挖空练习

### 6. 开始AI练习
1. AI生成完成后选择"立即开始练习"，或
2. 点击菜单 "设置" → "开始练习" 或按F5键
3. 视频将自动播放，并在每句字幕结束时暂停
4. 在字幕交互区填写AI智能挖空的单词
5. 按Enter键或点击"确认"按钮提交答案
6. 查看答案反馈，点击"下一句"继续练习

## 🎬 视频播放器使用

### 基础控制
- **播放/暂停**: 点击播放按钮或按空格键
- **停止**: 点击停止按钮
- **调整进度**: 拖拽进度条到任意位置
- **调整音量**: 使用音量滑块

### 快捷键
- **空格键**: 播放/暂停
- **F11**: 切换全屏模式
- **右箭头**: 快进5秒
- **左箭头**: 快退5秒
- **ESC**: 退出全屏模式
- **F5**: 开始练习模式
- **Enter**: 确认答案
- **Ctrl+H**: 获取提示
- **Ctrl+A**: 显示答案

### 全屏模式
- 点击全屏按钮或按F11进入全屏
- 在全屏模式下，播放控制依然可用
- 按ESC或双击视频区域退出全屏

## ⚙️ AI服务配置详解

### 支持的AI服务
1. **OpenAI官方**
   - API URL: `https://api.openai.com/v1/chat/completions`
   - 模型: `gpt-3.5-turbo`, `gpt-4`等

2. **Azure OpenAI**
   - API URL: `https://your-resource.openai.azure.com/openai/deployments/your-deployment/chat/completions?api-version=2023-12-01-preview`
   - 需要修改URL中的resource和deployment名称

3. **Anthropic Claude**
   - API URL: `https://api.anthropic.com/v1/messages`
   - 模型: `claude-3-sonnet-20240229`等

4. **自定义AI服务**
   - 任何兼容OpenAI API格式的服务
   - 输入相应的API URL和模型名称

### 配置预设
应用提供了常用服务的预设配置，点击预设按钮即可快速填充配置信息。

## 📁 文件支持

### 支持的视频格式
- MP4 (推荐)
- AVI
- MKV
- MOV
- WMV
- FLV

### 支持的字幕格式
- SRT (SubRip字幕文件)
- 支持多种编码: UTF-8, GBK, GB2312等

## 📝 字幕功能使用

### 字幕导入流程
1. 确保已导入视频文件
2. 通过菜单或提示导入SRT字幕文件
3. 系统自动解析字幕内容
4. 查看字幕信息和统计数据

### 时间同步调整
- 使用滑块调整时间偏移 (-30秒到+30秒)
- 实时预览调整效果
- 系统自动验证字幕质量
- 检测重叠、间隔等问题

### 字幕显示
- 字幕与视频完美同步
- 自动显示当前时间的字幕内容
- 显示字幕时间信息和编号
- 支持实时切换效果

## 🤖 AI练习生成使用

### AI配置要求
1. 确保已在"AI服务配置"中设置API密钥和URL
2. 支持OpenAI GPT-3.5/4、Claude-3等模型
3. 需要稳定的网络连接

### 练习配置选项详解
**学习水平:**
- **A1-A2 (初级)**: 基础词汇和简单语法
- **B1-B2 (中级)**: 常用词汇和中等语法
- **C1-C2 (高级)**: 高级词汇和复杂语法

**挖空重点类型:**
- **按词性**: 名词、动词、形容词、介词
- **按难度**: 高频词、低频词/核心词汇
- **按语法**: 动词时态、情态动词、固定搭配

**挖空密度:**
- **10-20%**: 简单练习，适合初学者
- **20-30%**: 中等练习，平衡难度
- **30-50%**: 高难度练习，深度学习

### AI生成过程
1. AI分析每句字幕的语言特征
2. 根据用户水平选择合适的挖空词汇
3. 生成个性化的练习数据
4. 提供智能提示和难度评估

## 🎮 练习功能使用

### 练习模式启动
1. 确保已导入视频和字幕文件
2. 使用菜单或按F5键启动练习模式
3. 系统自动开始第一句练习

### 练习交互流程
1. **自动播放**: 视频播放当前句子的字幕内容
2. **自动暂停**: 句子播放完毕后自动暂停
3. **填空练习**: 在字幕交互区填写被挖空的单词
4. **答案验证**: 输入答案后系统实时验证
5. **继续下一句**: 完成后点击"下一句"继续

### 练习辅助功能
- **💡 提示**: 点击提示按钮获取帮助
- **👁️ 显示答案**: 直接查看正确答案
- **✓ 确认**: 提交当前答案进行验证
- **▶️ 下一句**: 继续下一个练习

### 答案反馈系统
- **绿色边框**: 答案正确 ✅
- **红色边框**: 答案错误 ❌
- **蓝色边框**: 等待输入状态
- **实时验证**: 输入时即时反馈

## 🔧 故障排除

### 视频无法播放
1. 确认视频文件格式是否支持
2. 检查文件是否损坏
3. 尝试使用其他视频文件测试

### AI连接失败
1. 检查网络连接
2. 验证API Key是否正确
3. 确认API URL格式是否正确
4. 检查API服务是否可用

### 应用启动失败
1. 确认Python版本 (需要3.10+)
2. 安装所需依赖: `pip install -r requirements.txt`
3. 检查PySide6是否正确安装

## 📈 开发进度

### ✅ 已完成功能 (完整版本)
- [x] 现代化UI界面 (重新设计的上下布局)
- [x] AI服务配置 (支持多种AI模型)
- [x] 视频播放器 (完整功能)
- [x] 全屏模式支持
- [x] 快捷键支持
- [x] 字幕导入和同步
- [x] 字幕时间调整
- [x] 字幕预览验证
- [x] 交互式练习界面
- [x] 智能挖空输入框
- [x] 答案验证和反馈
- [x] 自动视频暂停控制
- [x] 练习流程导航
- [x] **AI智能挖空生成**
- [x] **个性化练习配置**
- [x] **基于用户水平的挖空策略**

### 🎉 **MVP功能全部完成！**
应用程序现在完全可用，提供完整的个性化视频听力填空练习体验！

## 💡 使用技巧

1. **首次使用**：建议先配置AI服务，然后导入一个短视频和对应字幕进行测试
2. **快捷键**：熟练使用空格键和方向键可以大大提高操作效率
3. **全屏观看**：使用F11全屏观看视频，获得更好的学习体验
4. **字幕同步**：如果字幕与视频不同步，使用时间偏移调整功能
5. **AI练习生成**：使用"练习配置"生成个性化练习，根据水平调整难度
6. **练习模式**：按F5快速启动练习模式，享受沉浸式学习体验
7. **答案输入**：支持回车键快速提交答案，提高练习效率
8. **多样化挖空**：尝试不同的挖空重点和密度，获得丰富的学习体验
9. **配置保存**：所有配置都会自动保存，下次启动时无需重新设置

---
*如有问题或建议，请联系开发团队*
